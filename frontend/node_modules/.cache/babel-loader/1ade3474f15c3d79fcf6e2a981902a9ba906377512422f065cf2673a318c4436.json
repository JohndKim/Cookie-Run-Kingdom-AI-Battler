{"ast":null,"code":"import _slicedToArray from\"/Users/johnkim/Developer/crk-django/crk-venv/crk/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dropdown(_ref){var cookies=_ref.cookies,value=_ref.value,onChange=_ref.onChange;cookies=cookies.cookies;// currently dropdown is closed\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var divEl=useRef();// checks if click outside dropdown --> if outside, close dropdown\nuseEffect(function(){var handler=function handler(event){if(!divEl.current){return;}if(!divEl.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('click',handler,true);return function(){document.removeEventListener('click',handler);};},[]);// when clicked, open or close []\nvar handleClick=function handleClick(){setIsOpen(!isOpen);};// when cookie selected --> 1. close dropdown; 2. select cookie\nvar handleCookieClick=function handleCookieClick(cookie){setIsOpen(false);onChange(cookie);};// show list of all cookies\nconsole.log(cookies);console.log(\"value: \"+value);// console.log(cookies.cookies)\nvar renderedCookies=null;if(cookies){var _renderedCookies=cookies.map(function(cookie){console.log(\"cookie: \"+cookie);// if a cookie is selected\nif(value&&cookie.name==value.name){return/*#__PURE__*/ (// when clicked, close dropdown and select cookie\n_jsx(\"div\",{className:\"bg-gray-400 rounded cursor-pointer p-1\",onClick:function onClick(){return handleCookieClick(cookie);},children:cookie.name},cookie.name));}return/*#__PURE__*/ (// when clicked, close dropdown and select cookie\n_jsx(\"div\",{className:\"hover:bg-sky-100 rounded cursor-pointer p-1\",onClick:function onClick(){return handleCookieClick(cookie);},children:cookie.name},cookie.name));});}console.log(renderedCookies);// update selected cookie\n// let content = \"Select a Cookie\";\n// if (selection) {\n//     content = selection.label;\n// }\n// console.log(value);\n// return everything from before\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{ref:divEl,className:\"w-48 hover:cursor-pointer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-sm text-black text-center font-medium\",onClick:handleClick,children:(value===null||value===void 0?void 0:value.name)||'Select a Cookie'}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute rounded-lg p-3 text-sm text-black bg-background\",children:renderedCookies})]})});}export default Dropdown;","map":{"version":3,"names":["useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dropdown","_ref","cookies","value","onChange","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","divEl","handler","event","current","contains","target","document","addEventListener","removeEventListener","handleClick","handleCookieClick","cookie","console","log","renderedCookies","map","name","className","onClick","children","ref"],"sources":["/Users/johnkim/Developer/crk-django/crk-venv/crk/frontend/src/components/battle/Dropdown.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\nfunction Dropdown({ cookies, value, onChange}) {\n    cookies = cookies.cookies\n    // currently dropdown is closed\n    const [ isOpen, setIsOpen ] = useState(false); \n    const divEl = useRef();\n\n    // checks if click outside dropdown --> if outside, close dropdown\n    useEffect(() => {\n        const handler = (event) => {\n            if (!divEl.current) {\n\n                return;\n            }\n\n            if (!divEl.current.contains(event.target)) {\n                setIsOpen(false);\n            }\n        };\n\n        document.addEventListener('click', handler, true);\n\n        return () => {\n            document.removeEventListener('click', handler);\n        };\n    }, []);\n\n\n    // when clicked, open or close []\n    const handleClick = () => {\n        setIsOpen(!isOpen);\n    }\n\n    // when cookie selected --> 1. close dropdown; 2. select cookie\n    const handleCookieClick = (cookie) => {\n        setIsOpen(false);\n        onChange(cookie);\n        \n    }\n\n\n    // show list of all cookies\n    console.log(cookies)\n    console.log(\"value: \" + value)\n    // console.log(cookies.cookies)\n    const renderedCookies = null\n    if (cookies) {\n        const renderedCookies = cookies.map((cookie) => {\n        console.log(\"cookie: \" + cookie)\n        // if a cookie is selected\n            if (value && cookie.name == value.name) {\n                return (\n                    // when clicked, close dropdown and select cookie\n                        <div className=\"bg-gray-400 rounded cursor-pointer p-1\" onClick={() => handleCookieClick(cookie)} key={cookie.name}>{cookie.name}</div>\n                );\n            }\n\n            return (\n                // when clicked, close dropdown and select cookie\n                <div className=\"hover:bg-sky-100 rounded cursor-pointer p-1\" onClick={() => handleCookieClick(cookie)} key={cookie.name}>{cookie.name}\n                </div>\n            );\n        });\n    }\n    console.log(renderedCookies)\n\n    // update selected cookie\n    // let content = \"Select a Cookie\";\n    // if (selection) {\n    //     content = selection.label;\n    // }\n\n    // console.log(value);\n\n    // return everything from before\n    return (\n        <>\n        {/* <AddPicture cookies={cookies} value={value}/> */}\n        <div ref={divEl} className=\"w-48 hover:cursor-pointer\">\n        \n            {/*hover fix needed because it only does the text and not the full box, wip */}\n            <div className=\"px-4 py-2 text-sm text-black text-center font-medium\" onClick={handleClick}>{value?.name || 'Select a Cookie'}</div>\n            {/* if open, then show cookie list */}\n            {isOpen && <div className=\"absolute rounded-lg p-3 text-sm text-black bg-background\">{renderedCookies}</div>}\n        </div>\n        {/* <h2 className=\"mt-2 font-bold\">{value?.label || 'Cookie'}</h2> */}\n        </>\n    );\n}\n\nexport default Dropdown;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}